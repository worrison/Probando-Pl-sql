create or replace TRIGGER actualiza_order_total
AFTER INSERT OR DELETE OR UPDATE ON  DEMO_ORDER_ITEMS
REFERENCING OLD AS OLD NEW AS NEW
FOR EACH ROW
DECLARE
    diferencia NUMBER := (:NEW.QUANTITY * :NEW.UNIT_PRICE) - (:OLD.QUANTITY * :OLD.UNIT_PRICE);

BEGIN
    IF UPDATING THEN

        UPDATE DEMO_ORDERS SET ORDER_TOTAL = ORDER_TOTAL + diferencia where ORDER_ID=:OLD.ORDER_ID;
    END IF;

   /*IF DELETING THEN

    END IF

    IF UPDATING THEN

    END IF*/


END;